<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>智能人流监测系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="format-detection" content="telephone=no">
    <meta charset="UTF-8">

    <meta name="description" content="Violate Responsive Admin Template">
    <meta name="keywords" content="Super Admin, Admin, Template, Bootstrap">

    <title>云监测平台</title>

    <!-- CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.14.2/dist/bootstrap-table.min.css">
    <link href="css/bootstrap-editable.css" rel="stylesheet"/>
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/calendar.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/icons.css" rel="stylesheet">
    <link href="css/generics.css" rel="stylesheet">
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/video-js.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-select.css" />
    <link rel="stylesheet" href="laydate/theme/default/laydate.css" >
    <!--<link href="css/media-player.css" rel="stylesheet">-->

    <link rel="stylesheet" href="css/alert.css">
    <link rel="stylesheet" href="css/diary.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body id="skin-blur-city">

<header id="header" class="media">
    <a href="" id="menu-toggle"></a>
    <a class="logo pull-left" href="index.html">云预警平台</a>

    <div class="media-body">
        <div class="media" id="top-menu">
            <!--//显示时间-->
            <div id="time" class="pull-right ">
                <span id="hours"></span>
                :
                <span id="min"></span>
                :
                <span id="sec"></span>
            </div>
            <!--data-toggle="tooltip" data-placement="bottom" title="Tooltip on bottom"-->
            <a class="pull-right icon alert-tip animated"  data-container="body" >
                <i id="alert_count" class="n-count animated"></i>
                &#61710;
            </a>
        </div>
    </div>
</header>

<!--<div class="clearfix"></div>-->

<section id="main" class="p-relative" role="main">

    <!-- Sidebar -->
    <aside id="sidebar">

        <!-- Side Menu -->
        <ul class="list-unstyled side-menu">
            <li class="active">
                <a class="sa-side-home" href="index.html">
                    <span class="menu-item">基本信息</span>
                </a>
            </li>

            <li>
                <a class="sa-side-calendar" href="diary.html">
                    <span class="menu-item">历史查询</span>
                </a>
            </li>
            <li>
                <a id="judge" class="sa-side-table">
                    <span class="menu-item">正在警报</span>
                </a>
            </li>
        </ul>

    </aside>

    <!-- Content -->

    <section id="content" class="container">

        <h4 class="page-title">总览</h4>

        <div class="row">
            <div class="col-lg-9 ">
                <div class="row">
                    <div class="col-md-5 inToday-box">
                        <div class="inToday tile " >
                            <div class="row ">
                                <div class=" col-md-4 col-sm-4 col-xs-4">
                                    <div class="calendar">
                                        <span class="year">2019</span>
                                        <span class="day">17</span>
                                        <span class="month">May</span>
                                    </div>
                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-8 inToday-outer ">
                                    <div class="inToday-title">今日信息</div>
                                    <div class="inToday-right " >
                                        <div class="looking-item  col-md-4 col-sm-4 col-xs-4">
                                            <div class="showToday">正在监控</div>
                                            <div class="showToday">数量</div>
                                            <div class="showToday">3</div>
                                            <div class="showToday">(台)</div>
                                        </div>
                                        <div class="looking-item  col-md-4 col-sm-4 col-xs-4">
                                            <div class="showToday">发出警报</div>
                                            <div class="showToday">数量</div>
                                            <div class="showToday">1</div>
                                            <div class="showToday">(台)</div>
                                        </div>
                                        <div class="looking-item  col-md-4 col-sm-4 col-xs-4">
                                            <div class="showToday">挂起警报</div>
                                            <div class="showToday">数量</div>
                                            <div class="showToday">0</div>
                                            <div class="showToday">(台)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row inToday-bottom">
                                <div class="show-setting-mes">
                                    <div class="show-setting-mes-icon">
                                        <span>&nbsp;</span>
                                        <span class="fa fa-file-text-o"></span>
                                    </div>
                                    <div class="show-setting-text">生成今日报表</div>
                                </div>
                                <div class="show-today-report">
                                    <div class="show-today-report-icon">
                                        <span>&nbsp;</span>
                                        <span class="fa fa fa-info-circle"></span>
                                    </div>
                                    <div class="show-today-text">设备基本信息</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 percentChart-box tile">
                        <div class="col-md-8 col-sm-8 col-xs-8 chart-box"  >
                            <div class="percentChart ">
                                <div id="hasPercent"></div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-4  chart-mes-box" >
                            <div class="chart-mes " ></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="percentChart tile ">
                        <div id="recentNum"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="  setting-message">
                    <div class="row">
                        <h3 class="block-title">设备信息</h3>
                        <div class="message ">
                            <table id="set-mes" class="table table-hover" ></table>
                        </div>
                    </div>
                    <div class="row">
                        <h3 class="block-title">安保信息</h3>
                        <div class="message ">
                            <table id="security" class="table table-hover" ></table>
                        </div>
                    </div>

                </div>
                <div class=" toggle-show today-report tile">
                    <h2 class="tile-title">今日报表</h2>
                    <ul class="show-report">
                        <li>
                            <p>地点:<span class="">钟海楼</span></p>
                            <p>预警时间:<span>2019-5-19 14:00 - 2019-5-19 16:00 </span></p>
                            <p>持续时间:<span>120</span>分</p>
                            <p>阈值:<span class="">200</span>(人)</p>
                            <p>人数峰值:<span>300</span>(人)</p>
                            <p>最高预警级别:<span>三级</span></p>
                            <p>处理人员:<span>李世民</span></p>
                            <p>联系方式:<span>1283182414</span></p>
                        </li>
                        <li>
                            <p>地点:<span class="">主楼</span></p>
                            <p>预警时间:<span>2019-5-19 14:00 - 2019-5-19 16:00 </span></p>
                            <p>持续时间:<span>120</span>分</p>
                            <p>阈值:<span class="">200</span>(人)</p>
                            <p>人数峰值:<span>300</span>(人)</p>
                            <p>最高预警级别:<span>三级</span></p>
                            <p>处理人员:<span>张嘎</span></p>
                            <p>联系方式:<span>1283182414</span></p>
                        </li>
                        <li>
                            <p>地点:<span class="">主楼</span></p>
                            <p>预警时间:<span>2019-5-19 14:00 - 2019-5-19 16:00 </span></p>
                            <p>持续时间:<span>120</span>分</p>
                            <p>阈值:<span class="">200</span>(人)</p>
                            <p>人数峰值:<span>300</span>(人)</p>
                            <p>最高预警级别:<span>三级</span></p>
                            <p>处理人员:<span>张嘎</span></p>
                            <p>联系方式:<span>1283182414</span></p>
                        </li>
                        <li>
                            <p>地点:<span class="">主楼</span></p>
                            <p>预警时间:<span>2019-5-19 14:00 - 2019-5-19 16:00 </span></p>
                            <p>持续时间:<span>120</span>分</p>
                            <p>阈值:<span class="">200</span>(人)</p>
                            <p>人数峰值:<span>300</span>(人)</p>
                            <p>最高预警级别:<span>三级</span></p>
                            <p>处理人员:<span>张嘎</span></p>
                            <p>联系方式:<span>1283182414</span></p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </section>
</section>

<!-- Javascript Libraries -->
<!-- jQuery -->
<script src="js/jquery.min.js"></script> <!-- jQuery Library -->
<script src="js/jquery-ui.min.js"></script> <!-- jQuery UI -->
<!--<script src="js/jquery.easing.1.3.js"></script> &lt;!&ndash; jQuery Easing - Requirred for Lightbox + Pie Charts&ndash;&gt;-->
<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>
<!-- Charts -->
<script src="js/charts/jquery.flot.js"></script> <!-- Flot Main -->
<script src="js/charts/jquery.flot.time.js"></script> <!-- Flot sub -->
<script src="js/charts/jquery.flot.animator.min.js"></script> <!-- Flot sub -->
<script src="js/charts/jquery.flot.resize.min.js"></script> <!-- Flot sub - for repaint when resizing the screen -->

<script src="js/sparkline.min.js"></script> <!-- Sparkline - Tiny charts -->
<script src="js/easypiechart.js"></script> <!-- EasyPieChart - Animated Pie Charts -->
<script src="js/charts.js"></script> <!-- All the above chart related functions -->
<!-- UX -->
<script src="js/scroll.min.js"></script> <!-- Custom Scrollbar -->
<!-- Other -->
<script src="js/calendar.min.js"></script> <!-- Calendar -->
<!--cookie-->
<script src="js/jquery.cookie.js"></script>
<script src="js/feeds.min.js"></script> <!-- News Feeds -->
<!-- All JS functions -->
<script src="js/functions.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://unpkg.com/bootstrap-table@1.14.2/dist/bootstrap-table.min.js"></script>
<!-- Latest compiled and minified Locales -->
<script src="https://unpkg.com/bootstrap-table@1.14.2/dist/locale/bootstrap-table-zh-CN.min.js"></script>
<!--editable-->
<script src="js/bootstrap-editable.js"></script>
<!--video.js-->
<script src="js/video.min.js"></script>
<!--bootstrap-select-->
<script src="js/bootstrap-select.js" type="text/javascript" charset="utf-8"></script>
<!--laydate-->
<script src="laydate/laydate.js"></script>
<!--<script src="js/media-player.min.js"></script> &lt;!&ndash; Video Player &ndash;&gt;-->
<!--hightcharts-->
<script src="https://img.highcharts.com.cn/highstock/highstock.js"> </script>
<script src="https://img.highcharts.com.cn/highcharts/highcharts-more.js"></script>
<script src="https://img.highcharts.com.cn/highcharts/modules/exporting.js"></script>
<script src="https://code.highcharts.com.cn/highcharts/modules/variable-pie.js"></script>
<script src="https://img.highcharts.com.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
<script>


    $(function(){

        $('[data-toggle="tooltip"]').tooltip({
                placement:'left',
            }
        );

        $("#judge").on("click" , function(){
            // console.log(!$(this).attr("href"));
            if(!$(this).attr("href")){
                Ewin.alert("无警报发生！")
            }
        });

        $(".alert-tip").on("click" , function(){
            // console.log(!$(this).attr("href"));
            if(!$(this).attr("href")){
                Ewin.alert("无警报发生！")
            }
        });

        var x,y;
        var resetValue;
        var resetPlace;
        var flag = 1;

        var websocket = null;
        //判断当前浏览器是否支持WebSocket
        if ('WebSocket' in window) {
            websocket = new WebSocket("ws://39.108.77.106/ai_monitor/wb/update");
        } else {
            alert('当前浏览器 Not support websocket')
        }
        //连接发生错误的回调方法
        websocket.onerror = function (){

        };
        //连接成功建立的回调方法
        websocket.onopen = function () {
            var jsonStr = JSON.stringify({id: 'listener'});
            websocket.send(jsonStr);
        };
        //接收到消息的回调方法
        websocket.onmessage = function (event) {
            $("#judge").attr("href" , "alert.html");
            $(".alert-tip").attr("href" ,"alert.html");
            var str = JSON.parse(event.data);
            $.cookie("video_source" ,str.video_port);           //存入cookie
            $.cookie("img_id" ,str.dt_id);
            console.log(str.dt_id);
            $.cookie("alert_place" , str.place_id);
            resetPlace   = str.place_id;
            console.log(str.has_performed);

            if((str.has_performed)&&flag){                      //弹出警报
                //发送消息到其他网页
                flag = 0;
                Ewin.confirm({ message: "有新的预警产生，是否前往？",btnok:"前往" }).on(function (e) {
                    if (!e) {
                        flag = 1;
                        return;
                    }
                    window.location.href = "alert.html";
                    flag = 1;
                });
            }else{
                $("#alert_count").html("1")
            }
        };
        //连接关闭的回调方法
        websocket.onclose = function () {
            $("#judge").attr("href" , "");
            $(".alert-tip").attr("href" ,"");
            // Ewin.alert("预警已结束！");
        };
        //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
        window.onbeforeunload = function (){
            closeWebSocket();
        };
        //将消息显示在网页上
        function setMessageInnerHTML(innerHTML) {

        }
        //关闭WebSocket连接
        function closeWebSocket() {
            websocket.close();
        }



        if($(window).width() < 768){
            $(".chart-box").removeClass("col-md-8 col-sm-8 col-xs-8 ");
            $(".chart-mes-box").css("display" , "none");
        }
        window.onresize = function(){
            if($(window).width() < 768){
                $(".chart-box").removeClass("col-md-8 col-sm-8 col-xs-8 ");
                $(".chart-mes-box").css("display" , "none");
            }else{
                if(!$(".chart-box").hasClass("col-md-8 col-sm-8 col-xs-8 ")){
                    $(".chart-box").addClass("col-md-8 col-sm-8 col-xs-8 ");
                    $(".chart-mes-box").css("display" , "block");
                }
            }
        };

        //日期显示
        (function(){
            var month ;
            var getDate = new Date();
            $(".year").html(getDate.getFullYear());
            $(".day").html(getDate.getDate());
            month = getDate.getMonth()+1;
            switch (month) {
                case 1 : month  = "yiyue ";break;
                case 2 : month  = "February";break;
                case 3 : month  = "March";break;
                case 4 : month  = "April";break;
                case 5 : month  = "May";break;
                case 6 : month  = "June";break;
                case 7 : month  = "July";break;
                case 8 : month  = "August";break;
                case 9 : month  = "September";break;
                case 10 : month  = "October";break;
                case 11 : month  = "November";break;
                case 12 : month  = "December";break;
            }
            $(".month").html(month);
        })();

        $.ajax({
            type:'get',
            url:'http://39.108.77.106/ai_monitor/usr/ac_main_chart',
            dataType:'json',
            success:function(res){
                var pieData = res.n_data;
                pie(pieData);

                var colunmData_x = res.u_data_name;
                var colunmData_y = res. u_data_nums;
                columnChart(colunmData_x,colunmData_y);
            }
        });

        //pie
        var colors = ['#2f7ed8', '#0d233a', '#F28F43', '#910000', '#1aadce',
            '#492970', '#8bbc21', '#77a1e5', '#c42525', '#a6c96a'];
        var pie = function(pieData){
            //右侧图例
            var index = 0 ;

            for(var i = 0 ; i < pieData.length ; i++){
                if(index > 10 ){
                    index = 0
                }
              $(".chart-mes").append(" <div class=''>" +
                  "<span class='chart-label' style='background-color:"+colors[index]+" '></span>" +
                  "<span class='chart-text'>"+pieData[index].name+"<strong style='color: #ffeb3c;'>"+pieData[index].y+"</strong>次</span>" +
                  "</div>") ;
                index++ ;
            }

            // Highcharts.getOptions().colors = Highcharts.map(colors, function (color) {
            //     return {
            //         radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
            //         stops: [
            //             [0, color],
            //             [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
            //         ]
            //     };
            // });
            // console.log(Highcharts.getOptions().colors)

        var chart = Highcharts.chart('hasPercent',{
            colors: colors,
            chart: {
                height:425,
                type: 'variablepie',
                backgroundColor:"",
            },
            title: {
                text: '近30日设备警报占比',
                style:{
                    color:'#FFD600',
                    fontSize:"18px",
                    fontFamily: 'open-sans-light'
                },
            },
            exporting:{
                enabled:false,
            },
            credits:{
                enabled:false
            },

            tooltip: {
                headerFormat: '',
                pointFormat: '<span style="color:{point.color}">\u25CF</span> <b> {point.name}</b><br/>' +
                    '次数: <b>{point.y}</b><br/>' +
                    '</b><br/>'
            },
            //数据显示
            // plotOptions: {
            //     series: {
            //         dataLabels: {
            //             color:"red",
            //         }
            //     }
            // },
            series: [{
                borderColor:"",
                minPointSize: 10,
                innerSize: '20%',
                zMin: 0,
                name: 'countries',
                dataLabels: {
                    x: 0,
                    align: 'center',
                    style:{
                        color:'white',
                        fontSize:'menu-active',
                        textOutline:'0',
                        fontWeight:400,
                    },
                    formatter: function() {
                        // console.log(this);
                        // console.log(Highcharts)
                        if($(window).width() <= 768){
                            return "<span style='color:#ffeb3c;'>"+this.percentage.toFixed(1)+"%</span>"
                        }
                        return "<span>"+this.key+":</span><span style='color:#ffeb3c;'>"+this.percentage.toFixed(1)+"%</span>"
                    }
                },
                data: pieData
            }]
        });
        };

        //柱形图
        var columnChart = function(colunmData_x,colunmData_y){
            var chart = Highcharts.chart('recentNum', {
                colors: colors,
                chart: {
                    type: 'column',
                    backgroundColor:"",
                },
                title: {
                    text: '近30日警报次数',
                    style:{
                        color:'#FFD600',
                        fontSize:"18px",
                        fontFamily: 'open-sans-light'
                    },
                },
                credits:{
                    enabled:false,
                },
                exporting:{
                    enabled:false,
                },
                tooltip: {
                    pointFormat: '次数: <b>{point.y:.0f} </b>'
                },
                xAxis: {
                    categories: colunmData_x,
                    labels: {
                        style: {
                            color: "white",
                            fontFamily: 'open-sans-light'
                        }
                    }
                },
                yAxis:{
                    title: {
                        text: '次数 ',
                        style:{
                            color:'#FFD600',
                            fontSize:"15px",
                            fontFamily: 'open-sans-light'
                        },
                    },
                    labels: {
                        style: {
                            color: "white",
                            fontFamily: 'open-sans-light'
                        }
                    }
                },
                series: [{
                    borderColor:"",
                    type: 'column',
                    colorByPoint: true,
                    data: colunmData_y,
                    showInLegend: false,
                    dataLabels: {
                        enabled: true,
                        rotation: 360,
                        align: 'right',
                        format: '{point.y:.0f}', // :.1f 为保留 1 位小数
                        y: 10,
                        borderWidth: 0,
                        style:{
                            color:'white',
                            fontSize:'12px',
                            textOutline:'0',
                            fontWeight:400,
                        }
                    }
                }]
            });
        };

        //setting table
        (function(){
            $('#set-mes').bootstrapTable({
                url: "http://39.108.77.106/ai_monitor/usr/ac_plh_place",//数据源
                dataField: "rows",//服务端返回数据键值 就是说记录放的键值是rows，分页时使用总记录数的键值为total
                search: false,//是否搜索
                pagination: false,//是否分页
                pageSize: 5,//单页记录数
                striped: true,//显示隔行间色
                sidePagination: "client",//服务端分页
                contentType: "application/x-www-form-urlencoded",//请求数据内容格式 默认是 application/json 自己根据格式自行服务端处理
                dataType: "json",//期待返回数据类型
                method: "get",//请求方式
                queryParamsType: "limit",//查询参数组织方式
                responseHandler:function(res){      //初始化数据格式
                    res = res.data;
                    return res
                },
                searchOnEnterKey: false,//回车搜索
                showRefresh: false,//刷新按钮
                showColumns: false,//列选择按钮
                buttonsAlign: "right",//按钮对齐方式
                // toolbar: "",//指定工具栏
                toolbarAlign: "",//工具栏对齐方式
                columns: [
                    {
                        title: "设备",
                        field: "p_name",
                        // titleTooltip: "this is name"
                        align: "center",//水平
                    },
                    {
                        field: "p_threh",
                        title: "阈值",
                        align: "center",//水平
                        formatter: function (value, row, index) {
                            // console.log(value,row.Id,index);
                            return "<a  href=\"#\" class='' name=\"p_threh\"    data-type=\"text\"  data-title=\"修改阈值\">" + value + "</a>";
                        }
                    },
                    {
                        field: "近30日警报数",
                        title: "近30日警报数",
                        align: "center",//水平
                    },
                    {
                        field: "p_workers",
                        title: "负责人员",
                        align: "center",//水平
                    },

                ],
                onClickRow: function (row, $element) {
                    $a = $element.find("td > .editable ");
                    // console.log($a);
                    curRow = row;                               //获取一行的信息
                    // console.log(curRow);
                    old_value = curRow.p_threh;
                    console.log(old_value)
                },
                onLoadSuccess: function (aa, bb, cc) {
                    $("#set-mes a").editable({
                        type: 'text',
                        validate:function(value){               //判断修改阈值格式
                            if( isNaN(value)){
                                return '输入有误！';
                            }
                        },
                        url: function (params) {
                            // console.log(params);//获取标签元素
                            var sName = $(this).attr("name");   //获取特定元素标签name
                            // console.log(sName);
                            curRow[sName] = params.value;       //将新值付给curRow行的特定元素标签
                            // console.log(curRow[sName]);
                            console.log(curRow.p_threh,resetPlace);
                            if( !isNaN(curRow.p_threh)){
                                var jsonStr = JSON.stringify({id: 'client' , place_id:resetPlace ,msg:{"reset_number":curRow.p_threh}} );
                                websocket.send(jsonStr);
                                setTimeout(function(){
                                    Ewin.alert("修改成功，阈值将在下次生效！");
                                },1000)
                            }
                        },
                    });
                },
                locale: "zh-CN", //中文支持
                detailView: false, //是否显示详情折叠
            });
        })();

        //保安
        (function(){
            $('#security').bootstrapTable({
                url: "http://39.108.77.106/ai_monitor/usr/ac_worker_info",//数据源
                dataField: "rows",//服务端返回数据键值 就是说记录放的键值是rows，分页时使用总记录数的键值为total
                // height: tableHeight(),//高度调整
                // height:"382",
                search: false,//是否搜索
                pagination: false,//是否分页
                pageSize: 5,//单页记录数
                striped: true,//显示隔行间色
                sidePagination: "client",//服务端分页
                contentType: "application/x-www-form-urlencoded",//请求数据内容格式 默认是 application/json 自己根据格式自行服务端处理
                dataType: "json",//期待返回数据类型
                method: "get",//请求方式
                queryParamsType: "limit",//查询参数组织方式
                responseHandler:function(res){      //初始化数据格式
                    res = res.worker_data;
                    return res
                },
                queryParams: function getParams(params) {
                    params.other = "otherInfo";
                    return params;
                },
                searchOnEnterKey: false,//回车搜索
                showRefresh: false,//刷新按钮
                showColumns: false,//列选择按钮
                buttonsAlign: "right",//按钮对齐方式
                // toolbar: "",//指定工具栏
                toolbarAlign: "",//工具栏对齐方式
                columns: [
                    {
                        title: "姓名",
                        field: "w_name",
                        // titleTooltip: "this is name"
                        align: "center",//水平
                    },
                    {
                        field: "w_contact",
                        title: "联系方式",
                        align: "center",//水平
                    },
                    {
                        field: "w_place",
                        title: "负责区域",
                        align: "center",//水平
                    },
                ],
                locale: "zh-CN", //中文支持
                detailView: false, //是否显示详情折叠
            });
        })();
        
        //切换显示
        (function () {
            var flag = 0;
            var index_mes = 0;
            var index_report = 0;
            $(".show-setting-mes-icon").on("click" , function(){
                if(!index_mes){
                    $(".today-report").addClass("rotateY");
                    index_mes = 1;
                }
                if(!flag){
                    $(".setting-message").addClass("toggle-show ");
                    $(".today-report").removeClass("toggle-show");
                    flag = 1;
                }
            });
            $(".show-today-report-icon").on("click" , function(){
                if(!index_report){
                    $(".setting-message").addClass("rotateY");
                    index_report = 1;
                }
                if(flag){
                    $(".today-report").addClass("toggle-show ");
                    $(".setting-message").removeClass("toggle-show");
                    flag = 0
                }
            });
        })();

    });

</script>
</body>
</html>
